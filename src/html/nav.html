<nav data-behavior="topbar" class="topbar" style="display:none">
  <button type="button" data-behavior="erc20Cancel" class="link">
    <include src="rainbow-bridge.svg.html">{ "width": "2em" }</include>
  </button>
</nav>
<nav style="display: flex; align-items: stretch; position: absolute; right: 0.5em; top: 0.5em; z-index: 2">
  <div id="menu" class="dropdown" aria-live="polite" style="font-size: 0.8em">
    <button class="menu-icon" aria-controls="menu">
      <div></div>
      <span class="visually-hidden">menu</span>
    </button>
    <div class="right" style="width: 7em">
      <div>
        <a href="https://github.com/near/rainbow-bridge-frontend">View source</a>
      </div>
      <div data-behavior="signed-in" style="display: none; margin-top: 0.5em">
        <button class="link" data-behavior="logout">
          Sign out
        </button>
      </div>
    </div>
  </div>
</nav>
<script>
  window.addEventListener('load', function addNavEventHandlers () {
    document.querySelector('[data-behavior=logout]').onclick = async function logout () {
      await window.web3Modal.clearCachedProvider()
      window.nearConnection.signOut()
      setTimeout(() => window.location.reload())
    }
  })
</script>
<style>
  .topbar {
    border-bottom: 1px solid var(--light-gray);
    margin: 0;
    padding: 1em 1em 0.5em;
  }
  @media (min-width: 928px) {
    .topbar:before {
      position: fixed;
      top: 0; bottom: 0; right: 0; left: 0;
      content: ' ';
      background:
        url('img/form-bg-bottom-left.svg') no-repeat,
        url('img/form-bg-bottom-right.svg') no-repeat;
      background-position:
        bottom left,
        bottom right;
      z-index: -1;
    }
  }

  .menu-icon {
    padding-top: 0.5em;
  }
  .menu-icon:after,
  .menu-icon:before,
  .menu-icon div {
    background-color: var(--fg);
    border-radius: 3px;
    content: '';
    display: block;
    height: 2px;
    margin: 3px 0;
    width: 1em;
  }
</style>
<script>
  async function renderNav () {
    const { all: transfers } = await window.transfers.get()
    const params = Object.keys(window.urlParams.get())

    if (transfers.length || params.length) {
      window.show('topbar')
    } else {
      window.hide('topbar')
    }
  }
  window.renderers.push(renderNav)
</script>
