<nav style="display: flex; align-items: stretch; position: absolute; right: 0.5em; top: 0.5em; z-index: 2">
  <div id="menu" class="dropdown" aria-live="polite" style="font-size: 0.8em">
    <button class="menu-icon" aria-controls="menu">
      <div></div>
      <span class="visually-hidden">menu</span>
    </button>
    <div class="right" style="width: 7em">
      <div>
        <a href="https://github.com/near/rainbow-bridge-frontend">View source</a>
      </div>
      <div data-behavior="signed-in" style="display: none; margin-top: 0.5em">
        <button class="link" data-behavior="logout">
          Sign out
        </button>
      </div>
    </div>
  </div>
</nav>
<script>
  window.addEventListener('load', function addNavEventHandlers () {
    document.querySelector('[data-behavior=logout]').onclick = async function logout () {
      await window.web3Modal.clearCachedProvider()
      window.nearConnection.signOut()
      setTimeout(() => window.location.reload())
    }

    // transfers are rendered after page load, so we add one click handler to the
    // body tag to handle clicking the "delete" button on any of them
    document.querySelector('body').addEventListener('click', event => {
      const clearTransferButton = event.target.closest('[data-behavior=delete-transfer]')

      // no delete button clicked, end here
      if (!clearTransferButton) return

      const transferId = clearTransferButton.closest('[data-behavior=transfer]').id
      window.transfers.clear(transferId)
      render()
    })

    // transfers are rendered after page load, so we add one click handler to the
    // body tag to handle clicking the "retry" button on any of them
    document.querySelector('body').addEventListener('click', event => {
      const retryTransferButton = event.target.closest('[data-behavior=retry-transfer]')

      // no retry button clicked, end here
      if (!retryTransferButton) return

      const transferId = retryTransferButton.closest('[data-behavior=transfer]').id
      window.transfers.retry(transferId, render)
    })
  })
</script>
<style>
  .menu-icon {
    padding-top: 0.5em;
  }
  .menu-icon:after,
  .menu-icon:before,
  .menu-icon div {
    background-color: var(--fg);
    border-radius: 3px;
    content: '';
    display: block;
    height: 2px;
    margin: 3px 0;
    width: 1em;
  }
</style>
