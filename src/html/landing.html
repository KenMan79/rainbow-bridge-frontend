<div class="landing" data-behavior="landing">
  <h1 class="title">
    <picture>
      <source srcset="/img/rainbow-bridge-dark.svg" media="(prefers-color-scheme: dark)">
      <img src="/img/rainbow-bridge.svg" style="width: 2.3em; display: inline; margin-top: 2em">
    </picture>
    <small>
      ETH
      <img alt="to and from" src="img/swap-lr.svg" style="display: inline; vertical-align: bottom">
      NEAR
    </small>
    <div>Rainbow</div>
    <div>Bridge</div>
  </h1>
  <div style="margin: 0 auto 2.5em; max-width: 22em; text-align: center; padding: 1em">
    <p>
      From
      <a
        href="https://eips.ethereum.org/EIPS/eip-20"
        rel="nofollow"
        class="concept-ethereum"
      >ERC20</a>
      to
      <a
        href="https://github.com/nearprotocol/NEPs/pull/21"
        rel="nofollow"
        class="concept-near"
      >NEP21</a>
      and back! Connect your NEAR and Ethereum accounts to get started.
    </p>
    <form method="get" class="panel">
      <input
        data-behavior="transferFrom"
        name="erc20"
        type="hidden"
      />
      <div class="account" data-behavior="account">
        <label for="authEthereum">
          <!-- filled in with CSS -->
        </label>
        <div>
          <span class="concept-ethereum">
            <img src="img/ethereum.svg" alt="">
            <span>Ethereum</span>
          </span>
          <button type="button" id="authEthereum" data-behavior="authEthereum">
            Connect
          </button>
        </div>
      </div>
      <button type="button" class="swap-vert" data-behavior="swap-accounts">
        <span class="visually-hidden">swap</span>
      </button>
      <div class="account" data-behavior="account">
        <label for="authNear">
          <!-- filled in with CSS -->
        </label>
        <div>
          <span style="color: var(--fg-bold)">
            <include src="near.svg.html">{ "width": "1.5em" }</include>
            <span>NEAR</span>
          </span>
          <button type="button" id="authNear" data-behavior="authNear">
            Connect
          </button>
        </div>
      </div>
      <button data-behavior="landingSubmit" class="cta" style="margin-top: 2em">
        Begin new transfer
      </button>
    </form>
  </div>
</div>
<style>
  .panel {
    background-color: var(--bg);
    border-radius: 1em;
    box-shadow:
      0px 51px 121px rgba(0, 0, 0, 0.05),
      0px 21.3066px 50.5509px rgba(0, 0, 0, 0.0359427),
      0px 11.3915px 27.0269px rgba(0, 0, 0, 0.0298054),
      0px 6.38599px 15.1511px rgba(0, 0, 0, 0.025),
      0px 3.39155px 8.04662px rgba(0, 0, 0, 0.0201946),
      0px 1.4113px 3.34838px rgba(0, 0, 0, 0.0140573);
    margin: 0 auto;
    padding: 1em;
  }

  .connected-account {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    position: relative;
    padding-left: 1em;
  }
  .connected-account:before {
    color: var(--green);
    content: 'â€¢';
    font-size: 1.5em;
    left: 0;
    line-height: 0.8;
    position: absolute;
  }

  .swap-vert {
    background-color: transparent;
    background: url('/img/swap-vert.svg') no-repeat;
    background-position: center center;
    background-size: 1.3em;
    border-radius: 1000em;
    border: 1px solid var(--light-gray);
    height: 2em;
    width: 3.5em;
    margin: 1em auto 0.8em;
  }

  /**
   * Fill in labels with CSS to simplify swapping order with JS
   */
  .landing .account:first-child label:after {
    content: 'From'
  }
  .landing .account:nth-child(3) label:after {
    content: 'To'
  }

  .landing .account {
    font-size: 0.8em;
  }
  .landing .account label {
    margin-left: calc(1em + 1px);
    margin-bottom: 0.5em;
    text-align: left;
  }

  .landing .account > div {
    border: 1px solid var(--light-gray);
    border-radius: 0.5em;
    padding: 1em;
    display: grid;
    justify-content: space-between;
    grid-template-columns: auto auto;
    grid-gap: 3em;
  }

  .landing .account > div > span {
    display: grid;
    align-items: center;
    grid-gap: 0.5em;
    grid-template-columns: auto auto;
  }

  @media (min-width: 928px) {
    .landing .panel {
      margin-top: 6em;
    }
    .landing {
      background:
        url(img/landing-bg-left.svg) no-repeat,
        url(img/landing-bg-right.svg) no-repeat;
      background-position:
        top 20em left calc(50% - 17em),
        top 26em right calc(50% - 16em);
    }
  }
</style>
<script>
window.addEventListener('load', function addLandingHandlers () {
  window.onClick('swap-accounts', function swapAccountOrder () {
    const input = window.find('transferFrom')
    input.name = input.name === 'erc20' ? 'erc20n' : 'erc20'

    const [from, to] = window.findAll('account')
    fromInner = from.innerHTML
    toInner = to.innerHTML
    from.innerHTML = toInner
    to.innerHTML = fromInner
  })
})

async function renderLanding () {
  if (window.ethInitialized && window.nearInitialized) {
    window.find('landingSubmit').disabled = false
  } else {
    window.show('landing')
    window.find('landingSubmit').disabled = true
    return
  }

  const { all: transfers } = await window.transfers.get()
  const params = Object.keys(window.urlParams.get())

  if (transfers.length || params.length) {
    window.hide('landing')
  } else {
    window.show('landing')
  }
}
window.renderers.push(renderLanding)
</script>
